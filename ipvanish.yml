name: ipvanish

x-shared: &shared-gluetun
  image: qmcgaw/gluetun
  cap_add:
    - NET_ADMIN
  devices:
    - /dev/net/tun:/dev/net/tun
  # command: update -enduser -providers ipvanish

x-common-environment: &common-environment
  VPN_SERVICE_PROVIDER: ipvanish
  OPENVPN_USER: ${OPENVPN_USER}
  OPENVPN_PASSWORD: ${OPENVPN_PASSWORD}
  HTTPPROXY: "on"
  HTTPPROXY_STEALTH: "on"
  BLOCK_MALICIOUS: "off"
  BLOCK_SURVEILLANCE: "off"
  BLOCK_ADS: "off"

services:
  US-iad-b01:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b01.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9001"
    ports:
      - 9001:9001

  US-iad-b02:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b02.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9002"
    ports:
      - 9002:9002

  US-iad-b03:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b03.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9003"
    ports:
      - 9003:9003

  US-iad-b04:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b04.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9004"
    ports:
      - 9004:9004

  US-iad-b05:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b05.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9005"
    ports:
      - 9005:9005

  US-iad-b06:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b06.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9006"
    ports:
      - 9006:9006

  US-iad-b07:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b07.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9007"
    ports:
      - 9007:9007

  US-iad-b08:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b08.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9008"
    ports:
      - 9008:9008

  US-iad-b09:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b09.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9009"
    ports:
      - 9009:9009

  US-iad-b10:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b10.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9010"
    ports:
      - 9010:9010

  US-iad-b11:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b11.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9011"
    ports:
      - 9011:9011

  US-iad-b12:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b12.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9012"
    ports:
      - 9012:9012

  US-iad-b13:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b13.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9013"
    ports:
      - 9013:9013

  US-iad-b14:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b14.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9014"
    ports:
      - 9014:9014

  US-iad-b15:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b15.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9014"
    ports:
      - 9015:9015    

  US-iad-b16:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b16.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9016"
    ports:
      - 9016:9016

  US-iad-b17:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b17.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9017"
    ports:
      - 9017:9017

  US-iad-b18:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b18.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9018"
    ports:
      - 9018:9018

  US-iad-b19:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b19.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9019"
    ports:
      - 9019:9019

  US-iad-b20:
    <<: *shared-gluetun
    environment:
      <<: *common-environment
      SERVER_HOSTNAMES: iad-b20.ipvanish.com
      HTTPPROXY_LISTENING_ADDRESS: ":9020"
    ports:
      - 9020:9020

  # US-iad-b21:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b21.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9021"
  #   ports:
  #     - 9021:9021

  # US-iad-b22:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b22.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9022"
  #   ports:
  #     - 9022:9022

  # US-iad-b23:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b23.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9023"
  #   ports:
  #     - 9023:9023

  # US-iad-b24:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b24.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9024"
  #   ports:
  #     - 9024:9024

  # US-iad-b25:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b25.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9025"
  #   ports:
  #     - 9025:9025

  # US-iad-b26:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b26.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9026"
  #   ports:
  #     - 9026:9026

  # US-iad-b27:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b27.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9027"
  #   ports:
  #     - 9027:9027

  # US-iad-b28:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b28.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9028"
  #   ports:
  #     - 9028:9028

  # US-iad-b29:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b29.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9029"
  #   ports:
  #     - 9029:9029

  # US-iad-b30:
  #   <<: *shared-gluetun
  #   environment:
  #     SERVER_HOSTNAMES=iad-b24.ipvanish.com
  #     HTTPPROXY_LISTENING_ADDRESS=":9030"
  #   ports:
  #     - 9030:9030
